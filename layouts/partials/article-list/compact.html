{{ $image := partial "helper/image" (dict "Context" . "Type" "articleList") }}
<article class="{{- with .Params.image }}has-image {{ end }}">
  {{- $link := .RelPermalink -}} {{- with .Params.link -}} {{- $link = . -}} {{-
  end }}
  <a href="{{ $link }}" {{ with .Params.link }}target="_blank" {{ end }}>
    {{- if $image.exists -}}
    <div class="article-image">
      {{- if $image.resource -}} {{- $Permalink := $image.resource.RelPermalink
      -}} {{- $Width := $image.resource.Width -}} {{- $Height :=
      $image.resource.Height -}} {{- if (default true
      .Page.Site.Params.imageProcessing.cover.enabled) -}} {{- /*
      优化：调整缩略图尺寸为 300x200，移动端 150x100 */ -}} {{- $thumbnail :=
      $image.resource.Fill "300x200 q80 Smart" -}} {{- $Permalink =
      $thumbnail.RelPermalink -}} {{- $Width = $thumbnail.Width -}} {{- $Height
      = $thumbnail.Height -}} {{- end -}}

      <img
        src="{{ $Permalink }}"
        width="{{ $Width }}"
        height="{{ $Height }}"
        alt="{{ .Title }}"
        loading="lazy"
      />
      {{- else -}}
      <img
        src="{{ $image.permalink }}"
        loading="lazy"
        alt="Featured image of post {{ .Title }}"
      />
      {{- end -}}
    </div>
    {{- end -}}
    <div class="article-details">
      <h2 class="article-title">{{ .Title }}</h2>
      {{- with .Params.description -}}
      <footer class="article-time">{{ . }}</footer>
      {{- else -}}
      <footer class="article-time">
        <time
          >{{ .Date.Format (default "January 02, 2006"
          .Site.Params.dateFormat.published) }}</time
        >
      </footer>
      {{- end -}}
    </div>
  </a>
</article>
